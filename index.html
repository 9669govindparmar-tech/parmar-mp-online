<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Parmar MP Online – Login</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
}

.card{
  background:#fff;
  width:360px;
  padding:25px;
  border-radius:12px;
  box-shadow:0 15px 40px rgba(0,0,0,0.3);
}

h2{
  text-align:center;
  margin-bottom:10px;
  color:#1e3c72;
}

p{
  text-align:center;
  font-size:14px;
  color:#555;
}

input{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:15px;
}

button{
  width:100%;
  padding:12px;
  background:#1e3c72;
  color:white;
  border:none;
  border-radius:6px;
  font-size:16px;
  cursor:pointer;
}

button:hover{
  background:#16325c;
}

.link{
  text-align:center;
  margin-top:10px;
  font-size:14px;
  cursor:pointer;
  color:#1e3c72;
}

#otpBox{display:none;}
</style>
</head>

<body>

<div class="card">
  <h2>Parmar MP Online</h2>
  <p>Login / Sign Up with Mobile OTP</p>

  <!-- PHONE -->
  <div id="phoneBox">
    <input type="text" id="phone" placeholder="+91XXXXXXXXXX">
    <div id="recaptcha"></div>
    <button onclick="sendOTP()">Send OTP</button>
    <div class="link">Forgot Password?</div>
  </div>

  <!-- OTP -->
  <div id="otpBox">
    <input type="text" id="otp" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify & Login</button>
    <div class="link" onclick="back()">← Back</div>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDvLhQXTjdYyiU9OrsTLdYc6NJ8_RF7FDg",
  authDomain: "parmar-mp-online.firebaseapp.com",
  projectId: "parmar-mp-online"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
  'recaptcha',
  { size: 'normal' }
);

function sendOTP(){
  const phone = document.getElementById("phone").value;
  auth.signInWithPhoneNumber(phone, window.recaptchaVerifier)
    .then(result=>{
      window.confirmationResult = result;
      document.getElementById("phoneBox").style.display="none";
      document.getElementById("otpBox").style.display="block";
    })
    .catch(err=>alert(err.message));
}

function verifyOTP(){
  const otp = document.getElementById("otp").value;
  confirmationResult.confirm(otp)
    .then(()=>{
      window.location.href="home.html";
    })
    .catch(()=>alert("Wrong OTP"));
}

function back(){
  document.getElementById("otpBox").style.display="none";
  document.getElementById("phoneBox").style.display="block";
}
</script>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDvLhQXTjdYyiU9OrsTLdYc6NJ8_RF7FDg",
    authDomain: "parmar-mp-online.firebaseapp.com",
    projectId: "parmar-mp-online",
    messagingSenderId: "848027167840",
    appId: "1:848027167840:web:4beac01cb8783ff1412705"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
    'recaptcha',
    { size: 'normal' }
  );
</script>

<script>
  function sendOTP(){
    const phone = document.getElementById("phone").value;
    auth.signInWithPhoneNumber(phone, window.recaptchaVerifier)
      .then(result=>{
        window.confirmationResult = result;
        document.getElementById("phoneBox").style.display="none";
        document.getElementById("otpBox").style.display="block";
      })
      .catch(err=>alert(err.message));
  }

  function verifyOTP(){
    const otp = document.getElementById("otp").value;
    confirmationResult.confirm(otp)
      .then(()=>{
        window.location.href="home.html";
      })
      .catch(()=>alert("Wrong OTP"));
  }

  function back(){
    document.getElementById("otpBox").style.display="none";
    document.getElementById("phoneBox").style.display="block";
  }
</script>

</body>
</html>
